-- Obfuscated Lua
loadstring(game:HttpGet('data:text/plain;base64,bG9jYWwgdmFyXzQwNzk5OSA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGVpdmlkY29tc29uby9PYnNpZGlhbi9tYWluLyIKbG9jYWwgdmFyXzJjOWt1dyA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KHJlcG8gLi4gIkxpYnJhcnkubHVhIikpKCkKbG9jYWwgdmFyX2R2YXdlcyA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KHJlcG8gLi4gImFkZG9ucy9UaGVtZU1hbmFnZXIubHVhIikpKCkKbG9jYWwgdmFyX3lmZDRycyA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KHJlcG8gLi4gImFkZG9ucy9TYXZlTWFuYWdlci5sdWEiKSkoKQoKbG9jYWwgdmFyX3BmMDVjYSA9IExpYnJhcnkuT3B0aW9ucwpsb2NhbCB2YXJfdGZ2MDV4ID0gTGlicmFyeS5Ub2dnbGVzCgpMaWJyYXJ5LkZvcmNlQ2hlY2tib3ggPSBmYWxzZQpMaWJyYXJ5LlNob3dUb2dnbGVGcmFtZUluS2V5YmluZHMgPSB0cnVlCgpsb2NhbCB2YXJfMHUydDJuID0gTGlicmFyeTpDcmVhdGVXaW5kb3coewoJVGl0bGUgPSAiVmlvbGVuY2UgRGlzdHJpY3QiLAoJRm9vdGVyID0gIktpcmJ5IEh1YiB8IGh0dHBzOi8vZGlzY29yZC5nZy91ZWc1VWg5UnpzIiwKCUljb24gPSA5MzI3NjU1MDQ2LAoJTm90aWZ5U2lkZSA9ICJSaWdodCIsCglTaG93Q3VzdG9tQ3Vyc29yID0gdHJ1ZSwKfSkKCmxvY2FsIHZhcl9tM29vb2IgPSB7CglNYWluVGFiID0gV2luZG93OkFkZFRhYigiTWFpbiIsICJ1c2VyIiksCglFU1BUYWIgPSBXaW5kb3c6QWRkVGFiKCJFU1AiLCAiZXllIiksCiAgICBBaW1UYWIgPSBXaW5kb3c6QWRkVGFiKCJBaW1ib3QiLCAiY3Jvc3NoYWlyIiksCglbIlVJIFNldHRpbmdzIl0gPSBXaW5kb3c6QWRkVGFiKCJTZXR0aW5ncyIsICJzZXR0aW5ncyIpLAp9Cgpsb2NhbCB2YXJfMWlleDg5ID0gVGFicy5NYWluVGFiOkFkZExlZnRHcm91cGJveCgiQWJpbGl0eSIsICJ6YXAiKQoKbG9jYWwgdmFyXzF2NGEzdSA9IEFiaWxpdHlMZWZ0R3JvdXBib3g6QWRkU2xpZGVyKCJXYWxrU3BlZWRTbGlkZXIiLCB7CiAgICBUZXh0ID0gIldhbGtTcGVlZCIsCiAgICBEZWZhdWx0ID0gMTYsCiAgICBNaW4gPSAxNiwKICAgIE1heCA9IDIwMCwKICAgIFJvdW5kaW5nID0gMSwKICAgIENvbXBhY3QgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgbG9jYWwgdmFyX2F5NDNzeCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikuV2Fsa1NwZWVkID0gVmFsdWUKICAgICAgICBlbmQKICAgIGVuZAp9KQoKbG9jYWwgdmFyX25xN3d6bCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgoKbG9jYWwgdmFyX3BnYjBrdiA9IEFiaWxpdHlMZWZ0R3JvdXBib3g6QWRkU2xpZGVyKCJKdW1wUG93ZXJTbGlkZXIiLCB7CiAgICBUZXh0ID0gIkp1bXBQb3dlciIsCiAgICBEZWZhdWx0ID0gNTAsCiAgICBNaW4gPSA1MCwKICAgIE1heCA9IDIwMCwKICAgIFJvdW5kaW5nID0gMSwKICAgIENvbXBhY3QgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKS5KdW1wUG93ZXIgPSBWYWx1ZQogICAgICAgIGVuZAogICAgZW5kCn0pCgoKbG9jYWwgdmFyX28zMTU1MyA9IDcwCgpsb2NhbCB2YXJfNnBqamp0ID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKCmxvY2FsIHZhcl8zN3hiamUgPSBBYmlsaXR5TGVmdEdyb3VwYm94OkFkZFNsaWRlcigiRk9WU2xpZGVyIiwgewogICAgVGV4dCA9ICJGaWVsZCBvZiBWaWV3IiwKICAgIERlZmF1bHQgPSBmb3YsCiAgICBNaW4gPSA3MCwKICAgIE1heCA9IDEyMCwKICAgIFJvdW5kaW5nID0gMSwKICAgIENvbXBhY3QgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZm92ID0gVmFsdWUKICAgICAgICBjYW1lcmEuRmllbGRPZlZpZXcgPSBmb3YKICAgIGVuZAp9KQoKbG9jYWwgdmFyX3J3ang3ciA9IFRhYnMuTWFpblRhYjpBZGRSaWdodEdyb3VwYm94KCJBYmlsaXR5IDIiLCAiemFwIikKCmxvY2FsIHZhcl8zOGxnOWcgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgdmFyX2RxanJ0cCA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCgpsb2NhbCB2YXJfaW96cWJiCgpsb2NhbCB2YXJfM2xsOGdvIGVuYWJsZU5vY2xpcCgpCiAgICBpZiBub2NsaXBDb25uZWN0aW9uIHRoZW4gcmV0dXJuIGVuZAogICAgbm9jbGlwQ29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMocGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKbG9jYWwgdmFyX3piamJhbiBkaXNhYmxlTm9jbGlwKCkKICAgIGlmIG5vY2xpcENvbm5lY3Rpb24gdGhlbgogICAgICAgIG5vY2xpcENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgbm9jbGlwQ29ubmVjdGlvbiA9IG5pbAogICAgZW5kCiAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICBmb3IgXywgcGFydCBpbiBwYWlycyhwbGF5ZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfdTAxcWE3ID0gQWJpbGl0eVJpZ2h0R3JvdXBib3g6QWRkVG9nZ2xlKCJOb2NsaXBUb2dnbGUiLCB7CiAgICBUZXh0ID0gIk5vY2xpcCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBUb29sdGlwID0gIlRvZ2dsZSBOb2NsaXAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBWYWx1ZSB0aGVuCiAgICAgICAgICAgIGVuYWJsZU5vY2xpcCgpCiAgICAgICAgZWxzZQogICAgICAgICAgICBkaXNhYmxlTm9jbGlwKCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKbG9jYWwgdmFyX2diaDM1dyA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKQoKbG9jYWwgdmFyX2I2Zjd5diA9IExpZ2h0LkFtYmllbnQKbG9jYWwgdmFyXzhvanBnaiA9IExpZ2h0LkNvbG9yU2hpZnRfQm90dG9tCmxvY2FsIHZhcl9xemxtMzYgPSBMaWdodC5Db2xvclNoaWZ0X1RvcAoKbG9jYWwgdmFyX2gyd3hydQoKbG9jYWwgdmFyX29paGNiZSBlbmFibGVGdWxsYnJpZ2h0KCkKICAgIGxvY2FsIHZhcl92bjg2Y2QgZG9mdWxsYnJpZ2h0KCkKICAgICAgICBMaWdodC5BbWJpZW50ID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgIExpZ2h0LkNvbG9yU2hpZnRfQm90dG9tID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgIExpZ2h0LkNvbG9yU2hpZnRfVG9wID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgZW5kCgogICAgZG9mdWxsYnJpZ2h0KCkKICAgIGZ1bGxicmlnaHRDb25uZWN0aW9uID0gTGlnaHQuQ2hhbmdlZDpDb25uZWN0KGRvZnVsbGJyaWdodCkKZW5kCgpsb2NhbCB2YXJfYTZrMGd3IGRpc2FibGVGdWxsYnJpZ2h0KCkKICAgIGlmIGZ1bGxicmlnaHRDb25uZWN0aW9uIHRoZW4KICAgICAgICBmdWxsYnJpZ2h0Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICBmdWxsYnJpZ2h0Q29ubmVjdGlvbiA9IG5pbAogICAgZW5kCiAgICBMaWdodC5BbWJpZW50ID0gZGVmYXVsdEFtYmllbnQKICAgIExpZ2h0LkNvbG9yU2hpZnRfQm90dG9tID0gZGVmYXVsdENvbG9yU2hpZnRfQm90dG9tCiAgICBMaWdodC5Db2xvclNoaWZ0X1RvcCA9IGRlZmF1bHRDb2xvclNoaWZ0X1RvcAplbmQKCmxvY2FsIHZhcl92OHlieG0gPSBBYmlsaXR5UmlnaHRHcm91cGJveDpBZGRUb2dnbGUoIkZ1bGxicmlnaHRUb2dnbGUiLCB7CiAgICBUZXh0ID0gIkZ1bGxicmlnaHQiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVG9vbHRpcCA9ICJUb2dnbGUgRnVsbGJyaWdodCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgZW5hYmxlRnVsbGJyaWdodCgpCiAgICAgICAgZWxzZQogICAgICAgICAgICBkaXNhYmxlRnVsbGJyaWdodCgpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCmxvY2FsIHZhcl9nbWczd20gPSBUYWJzLkVTUFRhYjpBZGRMZWZ0R3JvdXBib3goIkhpZ2hsaWdodCBLaWxsZXIgLyBTdXJ2aXZvciIsICJleWUiKQoKbG9jYWwgdmFyXzQ2OThuNCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHZhcl85ejlmaW4gPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCB2YXJfbHpra2JlID0gUGxheWVycy5Mb2NhbFBsYXllcgoKbG9jYWwgdmFyX2Rtd2FhZyA9IHt9CmxvY2FsIHZhcl9uYTdxcmUgPSB7fQpsb2NhbCB2YXJfeWxhaGViCmxvY2FsIHZhcl9oY2JjaTMKCmxvY2FsIHZhcl9uMngwNnUgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApCmxvY2FsIHZhcl96NmFpcWcgPSBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApCgpsb2NhbCB2YXJfazY3MTFiIGFkZEhpZ2hsaWdodChjaGFyYWN0ZXIsIGNvbG9yLCBuYW1lLCB0YmwpCiAgICBpZiBub3QgY2hhcmFjdGVyIG9yIG5vdCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuIHJldHVybiBlbmQKICAgIGlmIG5vdCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQobmFtZSkgdGhlbgogICAgICAgIGxvY2FsIHZhcl9ramozMzMgPSBJbnN0YW5jZS5uZXcoIkhpZ2hsaWdodCIpCiAgICAgICAgaGwuTmFtZSA9IG5hbWUKICAgICAgICBobC5GaWxsVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgaGwuT3V0bGluZVRyYW5zcGFyZW5jeSA9IDAKICAgICAgICBobC5GaWxsQ29sb3IgPSBjb2xvcgogICAgICAgIGhsLlBhcmVudCA9IGNoYXJhY3RlcgogICAgICAgIHRibFtjaGFyYWN0ZXJdID0gaGwKICAgIGVsc2UKICAgICAgICBjaGFyYWN0ZXJbbmFtZV0uRmlsbENvbG9yID0gY29sb3IKICAgIGVuZAplbmQKCmxvY2FsIHZhcl8xMTFwcTQgY2xlYXJIaWdobGlnaHRzKHRibCkKICAgIGZvciBjaGFyLCBobCBpbiBwYWlycyh0YmwpIGRvCiAgICAgICAgaWYgaGwgYW5kIGhsLlBhcmVudCB0aGVuCiAgICAgICAgICAgIGhsOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgZW5kCiAgICB0YWJsZS5jbGVhcih0YmwpCmVuZAoKbG9jYWwgdmFyX2t1MmZ4cyB1cGRhdGVLaWxsZXJzKCkKICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsciB+PSBMb2NhbFBsYXllciBhbmQgcGxyLlRlYW0gYW5kIHBsci5UZWFtLk5hbWUgPT0gIktpbGxlciIgYW5kIHBsci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICBhZGRIaWdobGlnaHQocGxyLkNoYXJhY3Rlciwga2lsbGVyQ29sb3IsICJLaWxsZXJIaWdobGlnaHQiLCBraWxsZXJIaWdobGlnaHRzKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgdmFyX25jdDBrOSB1cGRhdGVTdXJ2aXZvcnMoKQogICAgZm9yIF8sIHBsciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxyIH49IExvY2FsUGxheWVyIGFuZCBwbHIuVGVhbSBhbmQgcGxyLlRlYW0uTmFtZSA9PSAiU3Vydml2b3JzIiBhbmQgcGxyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGFkZEhpZ2hsaWdodChwbHIuQ2hhcmFjdGVyLCBzdXJ2aXZvckNvbG9yLCAiU3Vydml2b3JIaWdobGlnaHQiLCBzdXJ2aXZvckhpZ2hsaWdodHMpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfbDA3cmplIHNldHVwQ2hhcmFjdGVyTGlzdGVuZXIocGxyKQogICAgcGxyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICBpZiBwbHIuVGVhbSBhbmQgcGxyLlRlYW0uTmFtZSA9PSAiS2lsbGVyIiB0aGVuCiAgICAgICAgICAgIGFkZEhpZ2hsaWdodChjaGFyLCBraWxsZXJDb2xvciwgIktpbGxlckhpZ2hsaWdodCIsIGtpbGxlckhpZ2hsaWdodHMpCiAgICAgICAgZWxzZWlmIHBsci5UZWFtIGFuZCBwbHIuVGVhbS5OYW1lID09ICJTdXJ2aXZvcnMiIHRoZW4KICAgICAgICAgICAgYWRkSGlnaGxpZ2h0KGNoYXIsIHN1cnZpdm9yQ29sb3IsICJTdXJ2aXZvckhpZ2hsaWdodCIsIHN1cnZpdm9ySGlnaGxpZ2h0cykKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgpmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgIGlmIHBsciB+PSBMb2NhbFBsYXllciB0aGVuCiAgICAgICAgc2V0dXBDaGFyYWN0ZXJMaXN0ZW5lcihwbHIpCiAgICBlbmQKZW5kCgpQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3Qoc2V0dXBDaGFyYWN0ZXJMaXN0ZW5lcikKCmxvY2FsIHZhcl9neHJwbmkgPSBFU1BMZWZ0R3JvdXBib3g6QWRkVG9nZ2xlKCJIaWdobGlnaHRLaWxsZXIiLCB7CiAgICBUZXh0ID0gIkhpZ2hsaWdodCBLaWxsZXIiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVG9vbHRpcCA9ICJIaWdobGlnaHQgb25seSBLaWxsZXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBWYWx1ZSB0aGVuCiAgICAgICAgICAgIGtpbGxlckNvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdCh1cGRhdGVLaWxsZXJzKQogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYga2lsbGVyQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICBraWxsZXJDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAga2lsbGVyQ29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgY2xlYXJIaWdobGlnaHRzKGtpbGxlckhpZ2hsaWdodHMpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCjpBZGRDb2xvclBpY2tlcigiS2lsbGVyQ29sb3JQaWNrZXIiLCB7CiAgICBEZWZhdWx0ID0ga2lsbGVyQ29sb3IsCiAgICBUaXRsZSA9ICJLaWxsZXIgQ29sb3IiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBraWxsZXJDb2xvciA9IFZhbHVlCiAgICAgICAgZm9yIF8sIGhsIGluIHBhaXJzKGtpbGxlckhpZ2hsaWdodHMpIGRvCiAgICAgICAgICAgIGlmIGhsIGFuZCBobC5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgaGwuRmlsbENvbG9yID0ga2lsbGVyQ29sb3IKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCmxvY2FsIHZhcl9jZnBrdHkgPSBFU1BMZWZ0R3JvdXBib3g6QWRkVG9nZ2xlKCJIaWdobGlnaHRTdXJ2aXZvcnMiLCB7CiAgICBUZXh0ID0gIkhpZ2hsaWdodCBTdXJ2aXZvcnMiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVG9vbHRpcCA9ICJIaWdobGlnaHQgb25seSBTdXJ2aXZvcnMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBWYWx1ZSB0aGVuCiAgICAgICAgICAgIHN1cnZpdm9yQ29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KHVwZGF0ZVN1cnZpdm9ycykKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIHN1cnZpdm9yQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICBzdXJ2aXZvckNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICBzdXJ2aXZvckNvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGNsZWFySGlnaGxpZ2h0cyhzdXJ2aXZvckhpZ2hsaWdodHMpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCjpBZGRDb2xvclBpY2tlcigiU3Vydml2b3JDb2xvclBpY2tlciIsIHsKICAgIERlZmF1bHQgPSBzdXJ2aXZvckNvbG9yLAogICAgVGl0bGUgPSAiU3Vydml2b3IgQ29sb3IiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBzdXJ2aXZvckNvbG9yID0gVmFsdWUKICAgICAgICBmb3IgXywgaGwgaW4gcGFpcnMoc3Vydml2b3JIaWdobGlnaHRzKSBkbwogICAgICAgICAgICBpZiBobCBhbmQgaGwuUGFyZW50IHRoZW4KICAgICAgICAgICAgICAgIGhsLkZpbGxDb2xvciA9IHN1cnZpdm9yQ29sb3IKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCgpsb2NhbCB2YXJfYnRsYnd1ID0gVGFicy5FU1BUYWI6QWRkUmlnaHRHcm91cGJveCgiU2V0dGluZ3MgS2lsbGVyIC8gU3Vydml2b3IiLCAid3JlbmNoIikKCmxvY2FsIHZhcl80eG5wcDggPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCB2YXJfYjU1aXBkID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyXzZmdDF1NiA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCmxvY2FsIHZhcl9nNTU3eGcgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgpsb2NhbCB2YXJfdnppaTNvID0ge30KbG9jYWwgdmFyX3h2bTl1ZSA9IHt9Cgpsb2NhbCB2YXJfc2I4eXBsID0gZmFsc2UKbG9jYWwgdmFyXzFiNmVmbyA9IGZhbHNlCgpsb2NhbCB2YXJfb2lrNDB2ID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpCmxvY2FsIHZhcl9md3VxeXQgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoKbG9jYWwgdmFyX3Z6MHFqbyBDcmVhdGVUZXh0KCkKICAgIGxvY2FsIHZhcl83NzN3YzggPSBEcmF3aW5nLm5ldygiVGV4dCIpCiAgICB0ZXh0LlNpemUgPSAxNgogICAgdGV4dC5DZW50ZXIgPSB0cnVlCiAgICB0ZXh0Lk91dGxpbmUgPSB0cnVlCiAgICB0ZXh0LlZpc2libGUgPSBmYWxzZQogICAgcmV0dXJuIHRleHQKZW5kCgpsb2NhbCB2YXJfMmZmbWp6IFNldHVwRGlzcGxheShwbGF5ZXIpCiAgICBpZiBwbGF5ZXIgPT0gTG9jYWxQbGF5ZXIgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBkaXNwbGF5VGV4dHNbcGxheWVyXSB0aGVuIHJldHVybiBlbmQKCiAgICBsb2NhbCB2YXJfaXZzajI0ID0gQ3JlYXRlVGV4dCgpCiAgICBsb2NhbCB2YXJfN3c2eXp6ID0gQ3JlYXRlVGV4dCgpCgogICAgZGlzcGxheVRleHRzW3BsYXllcl0gPSB7TmFtZSA9IG5hbWVUZXh0LCBEaXN0YW5jZSA9IGRpc3RUZXh0fQoKICAgIGRpc3BsYXlDb25uZWN0aW9uc1twbGF5ZXJdID0gUnVuU2VydmljZS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIChub3Qgc2hvd05hbWUpIGFuZCAobm90IHNob3dEaXN0YW5jZSkgdGhlbgogICAgICAgICAgICBuYW1lVGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZGlzdFRleHQuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAoKICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgCiAgICAgICAgICAgIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIExvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KCiAgICAgICAgICAgIGxvY2FsIHZhcl85eXM3cGUgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgbG9jYWwgdmFyX2ttbDJrcSwgb25TY3JlZW4gPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQocm9vdC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDMsIDApKQogICAgICAgICAgICBsb2NhbCB2YXJfNGh4MzlnID0gKHJvb3QuUG9zaXRpb24gLSBMb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCgogICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICBpZiBzaG93TmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbmFtZVRleHQuVGV4dCA9IHBsYXllci5OYW1lCiAgICAgICAgICAgICAgICAgICAgbmFtZVRleHQuUG9zaXRpb24gPSBWZWN0b3IyLm5ldyhwb3MuWCwgcG9zLlkgLSAxNSkKICAgICAgICAgICAgICAgICAgICBuYW1lVGV4dC5Db2xvciA9IG5hbWVDb2xvcgogICAgICAgICAgICAgICAgICAgIG5hbWVUZXh0LlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbmFtZVRleHQuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBpZiBzaG93RGlzdGFuY2UgdGhlbgogICAgICAgICAgICAgICAgICAgIGRpc3RUZXh0LlRleHQgPSAiWyIgLi4gbWF0aC5mbG9vcihkaXN0KSAuLiAiXSIKICAgICAgICAgICAgICAgICAgICBkaXN0VGV4dC5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KHBvcy5YLCBwb3MuWSArIDUpCiAgICAgICAgICAgICAgICAgICAgZGlzdFRleHQuQ29sb3IgPSBkaXN0YW5jZUNvbG9yCiAgICAgICAgICAgICAgICAgICAgZGlzdFRleHQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBkaXN0VGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBuYW1lVGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgIGRpc3RUZXh0LlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIG5hbWVUZXh0LlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBkaXN0VGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgpsb2NhbCB2YXJfeTBkYXVmIFJlbW92ZURpc3BsYXkocGxheWVyKQogICAgaWYgZGlzcGxheVRleHRzW3BsYXllcl0gdGhlbgogICAgICAgIGlmIGRpc3BsYXlUZXh0c1twbGF5ZXJdLk5hbWUgdGhlbiBkaXNwbGF5VGV4dHNbcGxheWVyXS5OYW1lOlJlbW92ZSgpIGVuZAogICAgICAgIGlmIGRpc3BsYXlUZXh0c1twbGF5ZXJdLkRpc3RhbmNlIHRoZW4gZGlzcGxheVRleHRzW3BsYXllcl0uRGlzdGFuY2U6UmVtb3ZlKCkgZW5kCiAgICAgICAgZGlzcGxheVRleHRzW3BsYXllcl0gPSBuaWwKICAgIGVuZAogICAgaWYgZGlzcGxheUNvbm5lY3Rpb25zW3BsYXllcl0gdGhlbgogICAgICAgIGRpc3BsYXlDb25uZWN0aW9uc1twbGF5ZXJdOkRpc2Nvbm5lY3QoKQogICAgICAgIGRpc3BsYXlDb25uZWN0aW9uc1twbGF5ZXJdID0gbmlsCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfb3h5ejRkIENsZWFyQWxsRGlzcGxheXMoKQogICAgZm9yIHBsciwgXyBpbiBwYWlycyhkaXNwbGF5VGV4dHMpIGRvCiAgICAgICAgUmVtb3ZlRGlzcGxheShwbHIpCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfODJucGgyIFVwZGF0ZUFsbERpc3BsYXlzKCkKICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsciB+PSBMb2NhbFBsYXllciB0aGVuCiAgICAgICAgICAgIFNldHVwRGlzcGxheShwbHIpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxyKQogICAgaWYgc2hvd05hbWUgb3Igc2hvd0Rpc3RhbmNlIHRoZW4KICAgICAgICBTZXR1cERpc3BsYXkocGxyKQogICAgZW5kCmVuZCkKUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KFJlbW92ZURpc3BsYXkpCgpFU1BSaWdodEdyb3VwYm94OkFkZFRvZ2dsZSgiRGlzcGxheU5hbWVUb2dnbGUiLCB7CiAgICBUZXh0ID0gIkRpc3BsYXkgUGxheWVyIE5hbWUiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVG9vbHRpcCA9ICJEaXNwbGF5TmFtZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHNob3dOYW1lID0gVmFsdWUKICAgICAgICBpZiBWYWx1ZSBvciBzaG93RGlzdGFuY2UgdGhlbgogICAgICAgICAgICBVcGRhdGVBbGxEaXNwbGF5cygpCiAgICAgICAgZWxzZQogICAgICAgICAgICBDbGVhckFsbERpc3BsYXlzKCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKOkFkZENvbG9yUGlja2VyKCJOYW1lQ29sb3JQaWNrZXIiLCB7CiAgICBEZWZhdWx0ID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpLAogICAgVGl0bGUgPSAiTmFtZSBDb2xvciIsCiAgICBUcmFuc3BhcmVuY3kgPSAwLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBuYW1lQ29sb3IgPSBWYWx1ZQogICAgZW5kCn0pCgpFU1BSaWdodEdyb3VwYm94OkFkZFRvZ2dsZSgiRGlzcGxheURpc3RhbmNlVG9nZ2xlIiwgewogICAgVGV4dCA9ICJEaXNwbGF5IFBsYXllciBEaXN0YW5jZSIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBUb29sdGlwID0gIkRpc3BsYXlEaXN0YW5jZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHNob3dEaXN0YW5jZSA9IFZhbHVlCiAgICAgICAgaWYgVmFsdWUgb3Igc2hvd05hbWUgdGhlbgogICAgICAgICAgICBVcGRhdGVBbGxEaXNwbGF5cygpCiAgICAgICAgZWxzZQogICAgICAgICAgICBDbGVhckFsbERpc3BsYXlzKCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKOkFkZENvbG9yUGlja2VyKCJEaXN0YW5jZUNvbG9yUGlja2VyIiwgewogICAgRGVmYXVsdCA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgVGl0bGUgPSAiRGlzdGFuY2UgQ29sb3IiLAogICAgVHJhbnNwYXJlbmN5ID0gMCwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZGlzdGFuY2VDb2xvciA9IFZhbHVlCiAgICBlbmQKfSkKCgpsb2NhbCB2YXJfa3FieG9rID0gVGFicy5FU1BUYWI6QWRkTGVmdEdyb3VwYm94KCJIaWdobGlnaHQgSXRlbSIsICJleWUiKQoKbG9jYWwgdmFyX3hwamxvaiA9IHdvcmtzcGFjZTpXYWl0Rm9yQ2hpbGQoIk1hcCIpCmxvY2FsIHZhcl95cG1vbGogPSBmYWxzZQpsb2NhbCB2YXJfZ3Y1dzRiID0ge30KbG9jYWwgdmFyX2MzdXJsMiA9IENvbG9yMy5uZXcoMjU1LCAyNTUsIDApCgpsb2NhbCB2YXJfMnZjeGJxIGNsZWFySGlnaGxpZ2h0cygpCiAgICBmb3IgXywgZCBpbiBpcGFpcnMobWFwOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgbG9jYWwgdmFyXzFhZTlyaCA9IGQ6RmluZEZpcnN0Q2hpbGQoIkdlbmVyYXRvckhpZ2hsaWdodCIpCiAgICAgICAgaWYgaGwgdGhlbiBobDpEZXN0cm95KCkgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfOW0za3hwIGFkZEhpZ2hsaWdodChvYmopCiAgICBpZiBub3Qgb2JqOkZpbmRGaXJzdENoaWxkKCJHZW5lcmF0b3JIaWdobGlnaHQiKSB0aGVuCiAgICAgICAgbG9jYWwgdmFyX2ZlYjNqOSA9IEluc3RhbmNlLm5ldygiSGlnaGxpZ2h0IikKICAgICAgICBobC5OYW1lID0gIkdlbmVyYXRvckhpZ2hsaWdodCIKICAgICAgICBobC5GaWxsQ29sb3IgPSBnZW5lcmF0b3JDb2xvcgogICAgICAgIGhsLk91dGxpbmVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgaGwuQWRvcm5lZSA9IG9iagogICAgICAgIGhsLlBhcmVudCA9IG9iagogICAgZWxzZQogICAgICAgIG9iai5HZW5lcmF0b3JIaWdobGlnaHQuRmlsbENvbG9yID0gZ2VuZXJhdG9yQ29sb3IKICAgIGVuZAplbmQKCmxvY2FsIHZhcl94Nmt5Z3kgdXBkYXRlQWxsKCkKICAgIGZvciBfLCBkIGluIGlwYWlycyhtYXA6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBkLk5hbWUgPT0gIkdlbmVyYXRvciIgdGhlbgogICAgICAgICAgICBhZGRIaWdobGlnaHQoZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl83ZTNhNTkgPSBFU1BJdGVtTGVmdEdyb3VwYm94OkFkZFRvZ2dsZSgiTXlUb2dnbGUiLCB7CiAgICBUZXh0ID0gIkhpZ2hsaWdodCBHZW5lcmF0b3JzIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFRvb2x0aXAgPSAiSGlnaGxpZ2h0IG9ubHkgR2VuZXJhdG9yIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaGlnaGxpZ2h0RW5hYmxlZCA9IFZhbHVlCgogICAgICAgIGlmIGhpZ2hsaWdodEVuYWJsZWQgdGhlbgoKICAgICAgICAgICAgdXBkYXRlQWxsKCkKCiAgICAgICAgICAgIC0tICBFdmVudDogR2VuZXJhdG9yIAoKICAgICAgICAgICAgY29ubmVjdGlvbnMuY2hpbGRBZGRlZCA9IG1hcC5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihvYmopCiAgICAgICAgICAgICAgICBpZiBvYmouTmFtZSA9PSAiR2VuZXJhdG9yIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgYWRkSGlnaGxpZ2h0KG9iaikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCgogICAgICAgICAgICAtLSAgRXZlbnQ6IEdlbmVyYXRvciAKCiAgICAgICAgICAgIGNvbm5lY3Rpb25zLmNoaWxkUmVtb3ZlZCA9IG1hcC5EZXNjZW5kYW50UmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihvYmopCiAgICAgICAgICAgICAgICBpZiBvYmouTmFtZSA9PSAiR2VuZXJhdG9yIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2E4MG1iaiA9IG9iajpGaW5kRmlyc3RDaGlsZCgiR2VuZXJhdG9ySGlnaGxpZ2h0IikKICAgICAgICAgICAgICAgICAgICBpZiBobCB0aGVuIGhsOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICAtLSAgIFRvZ2dsZSAgIEhpZ2hsaWdodCAgZXZlbnQKCiAgICAgICAgICAgIGNsZWFySGlnaGxpZ2h0cygpCiAgICAgICAgICAgIGlmIGNvbm5lY3Rpb25zLmNoaWxkQWRkZWQgdGhlbiBjb25uZWN0aW9ucy5jaGlsZEFkZGVkOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAgICAgaWYgY29ubmVjdGlvbnMuY2hpbGRSZW1vdmVkIHRoZW4gY29ubmVjdGlvbnMuY2hpbGRSZW1vdmVkOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAgICAgY29ubmVjdGlvbnMgPSB7fQogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSAgIENvbG9yUGlja2VyCgo6QWRkQ29sb3JQaWNrZXIoIkNvbG9yUGlja2VyMSIsIHsKICAgIERlZmF1bHQgPSBDb2xvcjMubmV3KDI1NSwgMjU1LCAwKSwKICAgIFRpdGxlID0gIkdlbmVyYXRvciBDb2xvciIsCiAgICBUcmFuc3BhcmVuY3kgPSAwLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZW5lcmF0b3JDb2xvciA9IFZhbHVlCiAgICAgICAgaWYgaGlnaGxpZ2h0RW5hYmxlZCB0aGVuCiAgICAgICAgICAgIHVwZGF0ZUFsbCgpIC0tICAgR2VuZXJhdG9yIAoKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCmxvY2FsIHZhcl92b2poOGQgPSB3b3Jrc3BhY2U6V2FpdEZvckNoaWxkKCJNYXAiKQpsb2NhbCB2YXJfdWhhYmV5ID0ge30KbG9jYWwgdmFyX2MycDN3OSA9IENvbG9yMy5mcm9tUkdCKDEzOSwgNjksIDE5KQoKLS0gICBIaWdobGlnaHQgIFBhbGxldHdyb25nCgpsb2NhbCB2YXJfczF6OHhtIGFkZFBhbGxldEhpZ2hsaWdodChvYmopCiAgICBpZiBub3Qgb2JqOkZpbmRGaXJzdENoaWxkKCJQYWxsZXRIaWdobGlnaHQiKSB0aGVuCiAgICAgICAgbG9jYWwgdmFyX3g4enRjMCA9IEluc3RhbmNlLm5ldygiSGlnaGxpZ2h0IikKICAgICAgICBobC5OYW1lID0gIlBhbGxldEhpZ2hsaWdodCIKICAgICAgICBobC5GaWxsQ29sb3IgPSBwYWxsZXRDb2xvciAtLSAgIENvbG9yUGlja2VyCgogICAgICAgIGhsLk91dGxpbmVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgaGwuQWRvcm5lZSA9IG9iagogICAgICAgIGhsLlBhcmVudCA9IG9iagogICAgZWxzZQogICAgICAgIG9iai5QYWxsZXRIaWdobGlnaHQuRmlsbENvbG9yID0gcGFsbGV0Q29sb3IKICAgIGVuZAplbmQKCi0tICAgSGlnaGxpZ2h0IAoKbG9jYWwgdmFyX3pkeWgzbyBjbGVhclBhbGxldEhpZ2hsaWdodHMoKQogICAgZm9yIF8sIGQgaW4gaXBhaXJzKG1hcDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGxvY2FsIHZhcl9lYTlpYWggPSBkOkZpbmRGaXJzdENoaWxkKCJQYWxsZXRIaWdobGlnaHQiKQogICAgICAgIGlmIGhsIHRoZW4gaGw6RGVzdHJveSgpIGVuZAogICAgZW5kCmVuZAoKLS0gICBUb2dnbGUKCmxvY2FsIHZhcl9uNDlmbmogPSBFU1BJdGVtTGVmdEdyb3VwYm94OkFkZFRvZ2dsZSgiUGFsbGV0VG9nZ2xlIiwgewogICAgVGV4dCA9ICJIaWdobGlnaHQgUGFsbGV0d3JvbmciLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVG9vbHRpcCA9ICJIaWdobGlnaHQgb25seSBQYWxsZXR3cm9uZyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KCiAgICAgICAgICAgIGZvciBfLCBkIGluIGlwYWlycyhtYXA6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIGQuTmFtZSA9PSAiUGFsbGV0d3JvbmciIHRoZW4KICAgICAgICAgICAgICAgICAgICBhZGRQYWxsZXRIaWdobGlnaHQoZCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIC0tICBFdmVudDogUGFsbGV0d3JvbmcgCgogICAgICAgICAgICBwYWxsZXRDb25zLmFkZGVkID0gbWFwLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKG9iaikKICAgICAgICAgICAgICAgIGlmIG9iai5OYW1lID09ICJQYWxsZXR3cm9uZyIgdGhlbgogICAgICAgICAgICAgICAgICAgIGFkZFBhbGxldEhpZ2hsaWdodChvYmopCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQoKICAgICAgICAgICAgLS0gIEV2ZW50OiBQYWxsZXR3cm9uZyAKCiAgICAgICAgICAgIHBhbGxldENvbnMucmVtb3ZlZCA9IG1hcC5EZXNjZW5kYW50UmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihvYmopCiAgICAgICAgICAgICAgICBpZiBvYmouTmFtZSA9PSAiUGFsbGV0d3JvbmciIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdno0NTZlID0gb2JqOkZpbmRGaXJzdENoaWxkKCJQYWxsZXRIaWdobGlnaHQiKQogICAgICAgICAgICAgICAgICAgIGlmIGhsIHRoZW4gaGw6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIC0tICAgVG9nZ2xlICAgSGlnaGxpZ2h0ICBldmVudAoKICAgICAgICAgICAgY2xlYXJQYWxsZXRIaWdobGlnaHRzKCkKICAgICAgICAgICAgaWYgcGFsbGV0Q29ucy5hZGRlZCB0aGVuIHBhbGxldENvbnMuYWRkZWQ6RGlzY29ubmVjdCgpIGVuZAogICAgICAgICAgICBpZiBwYWxsZXRDb25zLnJlbW92ZWQgdGhlbiBwYWxsZXRDb25zLnJlbW92ZWQ6RGlzY29ubmVjdCgpIGVuZAogICAgICAgICAgICBwYWxsZXRDb25zID0ge30KICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gICBDb2xvclBpY2tlciAoIFBhbGxldHdyb25nKQoKOkFkZENvbG9yUGlja2VyKCJDb2xvclBpY2tlcjEiLCB7CiAgICBEZWZhdWx0ID0gQ29sb3IzLmZyb21SR0IoMTM5LCA2OSwgMTkpLAogICAgVGl0bGUgPSAiUGFsbGV0IENvbG9yIiwKICAgIFRyYW5zcGFyZW5jeSA9IDAsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHBhbGxldENvbG9yID0gVmFsdWUKICAgICAgICAtLSAgIFBhbGxldHdyb25nIAoKICAgICAgICBmb3IgXywgZCBpbiBpcGFpcnMobWFwOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIGQuTmFtZSA9PSAiUGFsbGV0d3JvbmciIGFuZCBkOkZpbmRGaXJzdENoaWxkKCJQYWxsZXRIaWdobGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICBkLlBhbGxldEhpZ2hsaWdodC5GaWxsQ29sb3IgPSBwYWxsZXRDb2xvcgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCmxvY2FsIHZhcl9kanZoem0gPSB3b3Jrc3BhY2U6V2FpdEZvckNoaWxkKCJNYXAiKQpsb2NhbCB2YXJfYWVlbDgwID0ge30KbG9jYWwgdmFyX2tpcjlmZyA9IENvbG9yMy5mcm9tUkdCKDEzOSwgNjksIDE5KQoKLS0gICBIaWdobGlnaHQgIEhvb2sKCmxvY2FsIHZhcl9mMzNlaHkgYWRkSG9va0hpZ2hsaWdodChvYmopCiAgICBpZiBub3Qgb2JqOkZpbmRGaXJzdENoaWxkKCJIb29rSGlnaGxpZ2h0IikgdGhlbgogICAgICAgIGxvY2FsIHZhcl9nbnEyY3YgPSBJbnN0YW5jZS5uZXcoIkhpZ2hsaWdodCIpCiAgICAgICAgaGwuTmFtZSA9ICJIb29rSGlnaGxpZ2h0IgogICAgICAgIGhsLkZpbGxDb2xvciA9IGhvb2tIaWdobGlnaHRDb2xvcgogICAgICAgIGhsLk91dGxpbmVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgaGwuQWRvcm5lZSA9IG9iagogICAgICAgIGhsLlBhcmVudCA9IG9iagogICAgZWxzZQogICAgICAgIG9iai5Ib29rSGlnaGxpZ2h0LkZpbGxDb2xvciA9IGhvb2tIaWdobGlnaHRDb2xvcgogICAgZW5kCmVuZAoKLS0gICBIaWdobGlnaHQgIEhvb2sgCgpsb2NhbCB2YXJfeTN0bDU2IGNsZWFySG9va0hpZ2hsaWdodHMoKQogICAgZm9yIF8sIGQgaW4gaXBhaXJzKG1hcDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGlmIGQ6SXNBKCJNb2RlbCIpIGFuZCBkLk5hbWUgPT0gIkhvb2siIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX3R4c2xocSA9IGQ6RmluZEZpcnN0Q2hpbGQoIk1lc2hQYXJ0IiwgdHJ1ZSkgLS0gICBNZXNoUGFydCAgSG9vawoKICAgICAgICAgICAgaWYgbWVzaCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfYzh6MDlvID0gbWVzaDpGaW5kRmlyc3RDaGlsZCgiSG9va0hpZ2hsaWdodCIpCiAgICAgICAgICAgICAgICBpZiBobCB0aGVuIGhsOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgotLSAgVG9nZ2xlICBIb29rCgpsb2NhbCB2YXJfZmhsMjlsID0gRVNQSXRlbUxlZnRHcm91cGJveDpBZGRUb2dnbGUoIkhvb2tUb2dnbGUiLCB7CiAgICBUZXh0ID0gIkhpZ2hsaWdodCBIb29rIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFRvb2x0aXAgPSAiSGlnaGxpZ2h0IG9ubHkgSG9vayIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KCiAgICAgICAgICAgIGZvciBfLCBkIGluIGlwYWlycyhtYXA6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIGQ6SXNBKCJNb2RlbCIpIGFuZCBkLk5hbWUgPT0gIkhvb2siIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfeTA0azdyID0gZDpGaW5kRmlyc3RDaGlsZCgiTWVzaFBhcnQiLCB0cnVlKQogICAgICAgICAgICAgICAgICAgIGlmIG1lc2ggdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBhZGRIb29rSGlnaGxpZ2h0KG1lc2gpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSAgRXZlbnQgIEhvb2sgCgogICAgICAgICAgICBob29rQ29ucy5hZGRlZCA9IG1hcC5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihvYmopCiAgICAgICAgICAgICAgICBpZiBvYmo6SXNBKCJNb2RlbCIpIGFuZCBvYmouTmFtZSA9PSAiSG9vayIgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl80NGE3cHMgPSBvYmo6RmluZEZpcnN0Q2hpbGQoIk1lc2hQYXJ0IiwgdHJ1ZSkKICAgICAgICAgICAgICAgICAgICBpZiBtZXNoIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYWRkSG9va0hpZ2hsaWdodChtZXNoKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIC0tICBFdmVudCAgSG9vayAKCiAgICAgICAgICAgIGhvb2tDb25zLnJlbW92ZWQgPSBtYXAuRGVzY2VuZGFudFJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24ob2JqKQogICAgICAgICAgICAgICAgaWYgb2JqOklzQSgiTW9kZWwiKSBhbmQgb2JqLk5hbWUgPT0gIkhvb2siIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfcmVlM2IzID0gb2JqOkZpbmRGaXJzdENoaWxkKCJNZXNoUGFydCIsIHRydWUpCiAgICAgICAgICAgICAgICAgICAgaWYgbWVzaCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9tcXZzd2cgPSBtZXNoOkZpbmRGaXJzdENoaWxkKCJIb29rSGlnaGxpZ2h0IikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGwgdGhlbiBobDpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgLS0gICAtPiAgSGlnaGxpZ2h0ICAKCiAgICAgICAgICAgIGNsZWFySG9va0hpZ2hsaWdodHMoKQogICAgICAgICAgICBpZiBob29rQ29ucy5hZGRlZCB0aGVuIGhvb2tDb25zLmFkZGVkOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAgICAgaWYgaG9va0NvbnMucmVtb3ZlZCB0aGVuIGhvb2tDb25zLnJlbW92ZWQ6RGlzY29ubmVjdCgpIGVuZAogICAgICAgICAgICBob29rQ29ucyA9IHt9CiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tICBDb2xvclBpY2tlciAgSG9vawoKOkFkZENvbG9yUGlja2VyKCJIb29rQ29sb3JQaWNrZXIiLCB7CiAgICBEZWZhdWx0ID0gaG9va0hpZ2hsaWdodENvbG9yLAogICAgVGl0bGUgPSAiSG9vayBIaWdobGlnaHQgQ29sb3IiLAogICAgVHJhbnNwYXJlbmN5ID0gMCwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaG9va0hpZ2hsaWdodENvbG9yID0gVmFsdWUKICAgICAgICAtLSAgIEhvb2sgCgogICAgICAgIGZvciBfLCBkIGluIGlwYWlycyhtYXA6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgZDpJc0EoIk1vZGVsIikgYW5kIGQuTmFtZSA9PSAiSG9vayIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2FvbHJuaiA9IGQ6RmluZEZpcnN0Q2hpbGQoIk1lc2hQYXJ0IiwgdHJ1ZSkKICAgICAgICAgICAgICAgIGlmIG1lc2ggdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl81Zjh4aTEgPSBtZXNoOkZpbmRGaXJzdENoaWxkKCJIb29rSGlnaGxpZ2h0IikKICAgICAgICAgICAgICAgICAgICBpZiBobCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGhsLkZpbGxDb2xvciA9IGhvb2tIaWdobGlnaHRDb2xvcgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kLAp9KQoKCgpsb2NhbCB2YXJfd2xseWY5ID0gVGFicy5FU1BUYWI6QWRkUmlnaHRHcm91cGJveCgiRGlzcGxheSBEaXN0YW5jZSBJdGVtIiwgImdyaWQtMngyIikKCi0tICBTZXJ2aWNlcwoKbG9jYWwgdmFyX2xwcDdyeiA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIHZhcl9jZ3dic3EgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQpsb2NhbCB2YXJfbDdid28yID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyXzdjaTAyeiA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgdmFyX2ljdXhsOCA9IHdvcmtzcGFjZTpXYWl0Rm9yQ2hpbGQoIk1hcCIpCgotLSAgIFRleHQgCgpsb2NhbCB2YXJfdDFqdjh6ID0ge30KbG9jYWwgdmFyX3A2aGRvbyA9IHt9CgotLSAgIERpc3BsYXkgRGlzdGFuY2UgR2VuZXJhdG9yCgpsb2NhbCB2YXJfZmVkZG1qID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDApCgotLSAgIERpc3BsYXkgCgpsb2NhbCB2YXJfNXp4MmdpIENyZWF0ZURpc3RhbmNlVGV4dCgpCiAgICBsb2NhbCB2YXJfNGJhdmcyID0gRHJhd2luZy5uZXcoIlRleHQiKQogICAgdGV4dC5TaXplID0gMTYKICAgIHRleHQuQ29sb3IgPSBnZW5lcmF0b3JEaXN0YW5jZUNvbG9yCiAgICB0ZXh0LkNlbnRlciA9IHRydWUKICAgIHRleHQuT3V0bGluZSA9IHRydWUKICAgIHRleHQuVmlzaWJsZSA9IGZhbHNlCiAgICByZXR1cm4gdGV4dAplbmQKCi0tICAgR2VuZXJhdG9yICggSGl0Qm94KQoKbG9jYWwgdmFyX2I4dDhsYyBEaXNwbGF5RGlzdGFuY2VGb3JHZW5lcmF0b3IoZ2VuZXJhdG9yKQogICAgaWYgbm90IGdlbmVyYXRvcjpJc0EoIk1vZGVsIikgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCB2YXJfcDN2NW81ID0gZ2VuZXJhdG9yOkZpbmRGaXJzdENoaWxkKCJIaXRCb3giKQogICAgaWYgbm90IGhpdGJveCBvciBub3QgaGl0Ym94OklzQSgiQmFzZVBhcnQiKSB0aGVuIHJldHVybiBlbmQKCiAgICBsb2NhbCB2YXJfMGR5MXB4ID0gQ3JlYXRlRGlzdGFuY2VUZXh0KCkKICAgIHRhYmxlLmluc2VydChnZW5UZXh0cywgZGlzdGFuY2VUZXh0KQoKICAgIGxvY2FsIHZhcl9sODIyMzIgPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl80ZDZ5ZzksIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KGhpdGJveC5Qb3NpdGlvbikKICAgICAgICAgICAgbG9jYWwgdmFyX29wdTZncCA9IChoaXRib3guUG9zaXRpb24gLSBMb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCgoKICAgICAgICAgICAgZGlzdGFuY2VUZXh0LkNvbG9yID0gZ2VuZXJhdG9yRGlzdGFuY2VDb2xvcgoKICAgICAgICAgICAgaWYgb25TY3JlZW4gdGhlbgogICAgICAgICAgICAgICAgZGlzdGFuY2VUZXh0LlRleHQgPSBzdHJpbmcuZm9ybWF0KCJbJS4wZl0iLCBkaXN0YW5jZSkKICAgICAgICAgICAgICAgIGRpc3RhbmNlVGV4dC5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KHBvcy5YLCBwb3MuWSAtIDIwKQogICAgICAgICAgICAgICAgZGlzdGFuY2VUZXh0LlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGRpc3RhbmNlVGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBkaXN0YW5jZVRleHQuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgdGFibGUuaW5zZXJ0KGdlbkNvbnMsIGNvbm4pCmVuZAoKLS0gICAoKQoKbG9jYWwgdmFyXzY2ajFmbyBTdGFydEdlbkRpc3BsYXkoKQogICAgZm9yIF8sIG9iaiBpbiBpcGFpcnMobWFwOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgb2JqOklzQSgiTW9kZWwiKSBhbmQgb2JqLk5hbWUgPT0gIkdlbmVyYXRvciIgdGhlbgogICAgICAgICAgICBEaXNwbGF5RGlzdGFuY2VGb3JHZW5lcmF0b3Iob2JqKQogICAgICAgIGVuZAogICAgZW5kCgogICAgZ2VuQ29ucy5hZGRlZCA9IG1hcC5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihvYmopCiAgICAgICAgaWYgb2JqOklzQSgiTW9kZWwiKSBhbmQgb2JqLk5hbWUgPT0gIkdlbmVyYXRvciIgdGhlbgogICAgICAgICAgICBEaXNwbGF5RGlzdGFuY2VGb3JHZW5lcmF0b3Iob2JqKQogICAgICAgIGVuZAogICAgZW5kKQplbmQKCi0tICAgKCkKCmxvY2FsIHZhcl9hYWg4MXYgU3RvcEdlbkRpc3BsYXkoKQogICAgZm9yIF8sIHRleHQgaW4gaXBhaXJzKGdlblRleHRzKSBkbwogICAgICAgIHRleHQ6UmVtb3ZlKCkKICAgIGVuZAogICAgZ2VuVGV4dHMgPSB7fQoKICAgIGZvciBfLCBjb25uIGluIHBhaXJzKGdlbkNvbnMpIGRvCiAgICAgICAgaWYgdHlwZW9mKGNvbm4pID09ICJSQlhTY3JpcHRDb25uZWN0aW9uIiB0aGVuCiAgICAgICAgICAgIGNvbm46RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGdlbkNvbnMgPSB7fQplbmQKCi0tICAgVG9nZ2xlIAoKbG9jYWwgdmFyXzJjNWxiaiA9IERpc3BsYXlEaXN0YW5jZUl0ZW1MZWZ0R3JvdXBib3g6QWRkVG9nZ2xlKCJHZW5EaXN0YW5jZVRvZ2dsZSIsIHsKICAgIFRleHQgPSAiRGlzcGxheURpc3RhbmNlIEdlbmVyYXRvciIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBUb29sdGlwID0gIkRpc3BsYXkgRGlzdGFuY2Ugb25seSBHZW5lcmF0b3IiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBWYWx1ZSB0aGVuCiAgICAgICAgICAgIFN0YXJ0R2VuRGlzcGxheSgpCiAgICAgICAgZWxzZQogICAgICAgICAgICBTdG9wR2VuRGlzcGxheSgpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tICAgQ29sb3JQaWNrZXIgIEdlbmVyYXRvcgoKOkFkZENvbG9yUGlja2VyKCJHZW5lcmF0b3JEaXN0YW5jZUNvbG9yUGlja2VyIiwgewogICAgRGVmYXVsdCA9IGdlbmVyYXRvckRpc3RhbmNlQ29sb3IsCiAgICBUaXRsZSA9ICJHZW5lcmF0b3IgRGlzdGFuY2UgQ29sb3IiLAogICAgVHJhbnNwYXJlbmN5ID0gMCwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2VuZXJhdG9yRGlzdGFuY2VDb2xvciA9IFZhbHVlCgogICAgICAgIGZvciBfLCB0ZXh0IGluIGlwYWlycyhnZW5UZXh0cykgZG8KICAgICAgICAgICAgdGV4dC5Db2xvciA9IGdlbmVyYXRvckRpc3RhbmNlQ29sb3IKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCgotLSAgU2VydmljZXMKCmxvY2FsIHZhcl9wN3N1cGggPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCB2YXJfcXFyYzk1ID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKbG9jYWwgdmFyXzYwZ244bSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHZhcl92bnZ4czcgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIHZhcl9kZDhsZzcgPSB3b3Jrc3BhY2U6V2FpdEZvckNoaWxkKCJNYXAiKQoKLS0gICBUZXh0IAoKbG9jYWwgdmFyXzB5cDFhciA9IHt9CmxvY2FsIHZhcl83OXBnaGEgPSB7fQoKLS0gICBEaXNwbGF5IERpc3RhbmNlCgpsb2NhbCB2YXJfMHkybWNtID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyMDAsIDApCgotLSAgIERpc3BsYXkgCgpsb2NhbCB2YXJfc3A3bjk2IENyZWF0ZURpc3RhbmNlVGV4dCgpCiAgICBsb2NhbCB2YXJfeHliYTRlID0gRHJhd2luZy5uZXcoIlRleHQiKQogICAgdGV4dC5TaXplID0gMTYKICAgIHRleHQuQ29sb3IgPSBwYWxsZXREaXN0YW5jZUNvbG9yCiAgICB0ZXh0LkNlbnRlciA9IHRydWUKICAgIHRleHQuT3V0bGluZSA9IHRydWUKICAgIHRleHQuVmlzaWJsZSA9IGZhbHNlCiAgICByZXR1cm4gdGV4dAplbmQKCi0tICAgRGlzcGxheSBEaXN0YW5jZSAgUGFsbGV0d3JvbmcKCmxvY2FsIHZhcl80ZDQ0NnogRGlzcGxheURpc3RhbmNlRm9yUGFsbGV0KHBhbGxldCkKICAgIGlmIG5vdCBwYWxsZXQ6SXNBKCJNb2RlbCIpIG9yIG5vdCBwYWxsZXQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIHZhcl9tc2N1Y2sgPSBwYWxsZXQuSHVtYW5vaWRSb290UGFydAoKICAgIGxvY2FsIHZhcl80dXhram0gPSBDcmVhdGVEaXN0YW5jZVRleHQoKQogICAgdGFibGUuaW5zZXJ0KHBhbGxldFRleHRzLCBkaXN0YW5jZVRleHQpCgogICAgbG9jYWwgdmFyX3V2c2R0OCA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBMb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIExvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX3NjdzhpNywgb25TY3JlZW4gPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQoaHJwLlBvc2l0aW9uKQogICAgICAgICAgICBsb2NhbCB2YXJfMHo0cHBoID0gKGhycC5Qb3NpdGlvbiAtIExvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKCgogICAgICAgICAgICBkaXN0YW5jZVRleHQuQ29sb3IgPSBwYWxsZXREaXN0YW5jZUNvbG9yCgogICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICBkaXN0YW5jZVRleHQuVGV4dCA9IHN0cmluZy5mb3JtYXQoIlslLjBmXSIsIGRpc3RhbmNlKQogICAgICAgICAgICAgICAgZGlzdGFuY2VUZXh0LlBvc2l0aW9uID0gVmVjdG9yMi5uZXcocG9zLlgsIHBvcy5ZIC0gMjApCiAgICAgICAgICAgICAgICBkaXN0YW5jZVRleHQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZGlzdGFuY2VUZXh0LlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGRpc3RhbmNlVGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICB0YWJsZS5pbnNlcnQocGFsbGV0Q29ucywgY29ubikKZW5kCgotLSAgICgpCgpsb2NhbCB2YXJfMmZpMm5uIFN0YXJ0UGFsbGV0RGlzcGxheSgpCiAgICBmb3IgXywgb2JqIGluIGlwYWlycyhtYXA6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBvYmo6SXNBKCJNb2RlbCIpIGFuZCBvYmouTmFtZSA9PSAiUGFsbGV0d3JvbmciIGFuZCBvYmo6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIERpc3BsYXlEaXN0YW5jZUZvclBhbGxldChvYmopCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBwYWxsZXRDb25zLmFkZGVkID0gbWFwLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKG9iaikKICAgICAgICBpZiBvYmo6SXNBKCJNb2RlbCIpIGFuZCBvYmouTmFtZSA9PSAiUGFsbGV0d3JvbmciIGFuZCBvYmo6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIERpc3BsYXlEaXN0YW5jZUZvclBhbGxldChvYmopCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKLS0gICAoKQoKbG9jYWwgdmFyX3lyM2tkZCBTdG9wUGFsbGV0RGlzcGxheSgpCiAgICBmb3IgXywgdGV4dCBpbiBpcGFpcnMocGFsbGV0VGV4dHMpIGRvCiAgICAgICAgdGV4dDpSZW1vdmUoKQogICAgZW5kCiAgICBwYWxsZXRUZXh0cyA9IHt9CgogICAgZm9yIF8sIGNvbm4gaW4gcGFpcnMocGFsbGV0Q29ucykgZG8KICAgICAgICBpZiB0eXBlb2YoY29ubikgPT0gIlJCWFNjcmlwdENvbm5lY3Rpb24iIHRoZW4KICAgICAgICAgICAgY29ubjpEaXNjb25uZWN0KCkKICAgICAgICBlbmQKICAgIGVuZAogICAgcGFsbGV0Q29ucyA9IHt9CmVuZAoKLS0gICBUb2dnbGUgIFBhbGxldHdyb25nCgpsb2NhbCB2YXJfejc4Z2I4ID0gRGlzcGxheURpc3RhbmNlSXRlbUxlZnRHcm91cGJveDpBZGRUb2dnbGUoIlBhbGxldERpc3RhbmNlVG9nZ2xlIiwgewogICAgVGV4dCA9ICJEaXNwbGF5RGlzdGFuY2UgUGFsbGV0d3JvbmciLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVG9vbHRpcCA9ICJEaXNwbGF5IERpc3RhbmNlIG9ubHkgUGFsbGV0d3JvbmciLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBWYWx1ZSB0aGVuCiAgICAgICAgICAgIFN0YXJ0UGFsbGV0RGlzcGxheSgpCiAgICAgICAgZWxzZQogICAgICAgICAgICBTdG9wUGFsbGV0RGlzcGxheSgpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tICAgQ29sb3JQaWNrZXIgIFBhbGxldHdyb25nCgo6QWRkQ29sb3JQaWNrZXIoIlBhbGxldERpc3RhbmNlQ29sb3JQaWNrZXIiLCB7CiAgICBEZWZhdWx0ID0gcGFsbGV0RGlzdGFuY2VDb2xvciwKICAgIFRpdGxlID0gIlBhbGxldCBEaXN0YW5jZSBDb2xvciIsCiAgICBUcmFuc3BhcmVuY3kgPSAwLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBwYWxsZXREaXN0YW5jZUNvbG9yID0gVmFsdWUKCiAgICAgICAgZm9yIF8sIHRleHQgaW4gaXBhaXJzKHBhbGxldFRleHRzKSBkbwogICAgICAgICAgICB0ZXh0LkNvbG9yID0gcGFsbGV0RGlzdGFuY2VDb2xvcgogICAgICAgIGVuZAogICAgZW5kLAp9KQoKLS0gIFNlcnZpY2VzCgpsb2NhbCB2YXJfNHRoNGQ5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgdmFyX2k2aHg2eSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCmxvY2FsIHZhcl94anpwZ3kgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCB2YXJfamY5aTN1ID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCB2YXJfZnhmeHk2ID0gd29ya3NwYWNlOldhaXRGb3JDaGlsZCgiTWFwIikKCi0tICAgVGV4dCAgSG9vayAKCmxvY2FsIHZhcl8zMjdwaHYgPSB7fQpsb2NhbCB2YXJfNWJ5cm0zID0ge30KCi0tICAgRGlzcGxheSBEaXN0YW5jZSBIb29rCgpsb2NhbCB2YXJfeGZjcW5lID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQoKLS0gICBEaXNwbGF5IAoKbG9jYWwgdmFyX3A0amlhbyBDcmVhdGVEaXN0YW5jZVRleHQoKQogICAgbG9jYWwgdmFyX3VjeGQxeiA9IERyYXdpbmcubmV3KCJUZXh0IikKICAgIHRleHQuU2l6ZSA9IDE2CiAgICB0ZXh0LkNvbG9yID0gaG9va0Rpc3RhbmNlQ29sb3IKICAgIHRleHQuQ2VudGVyID0gdHJ1ZQogICAgdGV4dC5PdXRsaW5lID0gdHJ1ZQogICAgdGV4dC5WaXNpYmxlID0gZmFsc2UKICAgIHJldHVybiB0ZXh0CmVuZAoKLS0gICBIb29rIChNZXNoUGFydCApCgpsb2NhbCB2YXJfMjFsb3dwIERpc3BsYXlEaXN0YW5jZUZvckhvb2sobWVzaFBhcnQpCiAgICBpZiBub3QgbWVzaFBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4gcmV0dXJuIGVuZAoKICAgIGxvY2FsIHZhcl90dWhsejcgPSBDcmVhdGVEaXN0YW5jZVRleHQoKQogICAgdGFibGUuaW5zZXJ0KGhvb2tUZXh0cywgZGlzdGFuY2VUZXh0KQoKICAgIGxvY2FsIHZhcl9ibGNwMGQgPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl91aW83bGYsIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KG1lc2hQYXJ0LlBvc2l0aW9uKQogICAgICAgICAgICBsb2NhbCB2YXJfazN2Y3p2ID0gKG1lc2hQYXJ0LlBvc2l0aW9uIC0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQoKCiAgICAgICAgICAgIGRpc3RhbmNlVGV4dC5Db2xvciA9IGhvb2tEaXN0YW5jZUNvbG9yCgogICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICBkaXN0YW5jZVRleHQuVGV4dCA9IHN0cmluZy5mb3JtYXQoIlslLjBmXSIsIGRpc3RhbmNlKQogICAgICAgICAgICAgICAgZGlzdGFuY2VUZXh0LlBvc2l0aW9uID0gVmVjdG9yMi5uZXcocG9zLlgsIHBvcy5ZIC0gMjApCiAgICAgICAgICAgICAgICBkaXN0YW5jZVRleHQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZGlzdGFuY2VUZXh0LlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGRpc3RhbmNlVGV4dC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICB0YWJsZS5pbnNlcnQoaG9va0NvbnMsIGNvbm4pCmVuZAoKLS0gICAoKQoKbG9jYWwgdmFyX3FtOG9qaiBTdGFydEhvb2tEaXNwbGF5KCkKICAgIGZvciBfLCBvYmogaW4gaXBhaXJzKG1hcDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGlmIG9iajpJc0EoIk1lc2hQYXJ0IikgYW5kIG9iai5QYXJlbnQgYW5kIG9iai5QYXJlbnQuTmFtZSA9PSAiTW9kZWwiIGFuZCBvYmouUGFyZW50LlBhcmVudCBhbmQgb2JqLlBhcmVudC5QYXJlbnQuTmFtZSA9PSAiSG9vayIgdGhlbgogICAgICAgICAgICBEaXNwbGF5RGlzdGFuY2VGb3JIb29rKG9iaikKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGhvb2tDb25zLmFkZGVkID0gbWFwLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKG9iaikKICAgICAgICBpZiBvYmo6SXNBKCJNZXNoUGFydCIpIGFuZCBvYmouUGFyZW50IGFuZCBvYmouUGFyZW50Lk5hbWUgPT0gIk1vZGVsIiBhbmQgb2JqLlBhcmVudC5QYXJlbnQgYW5kIG9iai5QYXJlbnQuUGFyZW50Lk5hbWUgPT0gIkhvb2siIHRoZW4KICAgICAgICAgICAgRGlzcGxheURpc3RhbmNlRm9ySG9vayhvYmopCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKLS0gICAoKQoKbG9jYWwgdmFyX3Jja3ZjcyBTdG9wSG9va0Rpc3BsYXkoKQogICAgZm9yIF8sIHRleHQgaW4gaXBhaXJzKGhvb2tUZXh0cykgZG8KICAgICAgICB0ZXh0OlJlbW92ZSgpCiAgICBlbmQKICAgIGhvb2tUZXh0cyA9IHt9CgogICAgZm9yIF8sIGNvbm4gaW4gcGFpcnMoaG9va0NvbnMpIGRvCiAgICAgICAgaWYgdHlwZW9mKGNvbm4pID09ICJSQlhTY3JpcHRDb25uZWN0aW9uIiB0aGVuCiAgICAgICAgICAgIGNvbm46RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGhvb2tDb25zID0ge30KZW5kCgotLSAgIFRvZ2dsZSAKCmxvY2FsIHZhcl8yZHFxM2IgPSBEaXNwbGF5RGlzdGFuY2VJdGVtTGVmdEdyb3VwYm94OkFkZFRvZ2dsZSgiSG9va0Rpc3RhbmNlVG9nZ2xlIiwgewogICAgVGV4dCA9ICJEaXNwbGF5RGlzdGFuY2UgSG9vayIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBUb29sdGlwID0gIkRpc3BsYXkgRGlzdGFuY2Ugb25seSBIb29rIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICBTdGFydEhvb2tEaXNwbGF5KCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIFN0b3BIb29rRGlzcGxheSgpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tICAgQ29sb3JQaWNrZXIgIEhvb2sKCjpBZGRDb2xvclBpY2tlcigiSG9va0Rpc3RhbmNlQ29sb3JQaWNrZXIiLCB7CiAgICBEZWZhdWx0ID0gaG9va0Rpc3RhbmNlQ29sb3IsCiAgICBUaXRsZSA9ICJIb29rIERpc3RhbmNlIENvbG9yIiwKICAgIFRyYW5zcGFyZW5jeSA9IDAsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGhvb2tEaXN0YW5jZUNvbG9yID0gVmFsdWUKCiAgICAgICAgZm9yIF8sIHRleHQgaW4gaXBhaXJzKGhvb2tUZXh0cykgZG8KICAgICAgICAgICAgdGV4dC5Db2xvciA9IGhvb2tEaXN0YW5jZUNvbG9yCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgotLSAgIFNlcnZpY2VzCgpsb2NhbCB2YXJfNXdnNjJqID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgdmFyX29jcHMxcCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHZhcl83aHI1OXAgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCB2YXJfZHExcmtvID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKbG9jYWwgdmFyX25yM29veiA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCgpsb2NhbCB2YXJfZ3d6ejl5ID0gZmFsc2UKbG9jYWwgdmFyX3FzajV0ZSA9ICJIZWFkIgpsb2NhbCB2YXJfeWtnenB2ID0gZmFsc2UKbG9jYWwgdmFyX2U3dHRhbyA9IDE1MApsb2NhbCB2YXJfcm4xcGFpID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKbG9jYWwgdmFyXzBrYXZ3YiA9IDAuMgpsb2NhbCB2YXJfYnR0MTVpID0gdHJ1ZQpsb2NhbCB2YXJfMm4ybTF3ID0gdHJ1ZQpsb2NhbCB2YXJfOGRqMmRrID0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMgpsb2NhbCB2YXJfazl6MWlyID0gZmFsc2UKCi0tICAgRk9WIENpcmNsZQoKbG9jYWwgdmFyXzFrc2U5ZiA9IERyYXdpbmcubmV3KCJDaXJjbGUiKQpmb3ZDaXJjbGUuVGhpY2tuZXNzID0gMgpmb3ZDaXJjbGUuTnVtU2lkZXMgPSA2NApmb3ZDaXJjbGUuRmlsbGVkID0gZmFsc2UKZm92Q2lyY2xlLlJhZGl1cyA9IGZvdlJhZGl1cwpmb3ZDaXJjbGUuQ29sb3IgPSBmb3ZDb2xvcgpmb3ZDaXJjbGUuVmlzaWJsZSA9IGZhbHNlCgotLSAgICAoUmF5Y2FzdCkKCmxvY2FsIHZhcl9yeWtzbDkgaXNWaXNpYmxlKHRhcmdldFBhcnQpCiAgICBpZiBub3QgdGFyZ2V0UGFydCB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgIGxvY2FsIHZhcl9ybjNnY2ggPSBDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uCiAgICBsb2NhbCB2YXJfY2Z4MmU5ID0gKHRhcmdldFBhcnQuUG9zaXRpb24gLSBvcmlnaW4pLlVuaXQgKiAodGFyZ2V0UGFydC5Qb3NpdGlvbiAtIG9yaWdpbikuTWFnbml0dWRlCiAgICBsb2NhbCB2YXJfeDFzd3lmID0gUmF5Y2FzdFBhcmFtcy5uZXcoKQogICAgcmF5Y2FzdFBhcmFtcy5GaWx0ZXJEZXNjZW5kYW50c0luc3RhbmNlcyA9IHtMb2NhbFBsYXllci5DaGFyYWN0ZXJ9CiAgICByYXljYXN0UGFyYW1zLkZpbHRlclR5cGUgPSBFbnVtLlJheWNhc3RGaWx0ZXJUeXBlLkJsYWNrbGlzdAogICAgbG9jYWwgdmFyXzNjZm13biA9IHdvcmtzcGFjZTpSYXljYXN0KG9yaWdpbiwgZGlyZWN0aW9uLCByYXljYXN0UGFyYW1zKQogICAgcmV0dXJuIG5vdCByZXN1bHQgb3IgcmVzdWx0Lkluc3RhbmNlOklzRGVzY2VuZGFudE9mKHRhcmdldFBhcnQuUGFyZW50KQplbmQKCi0tICAgIEZPVgoKbG9jYWwgdmFyX2l3eXRkMCBnZXRDbG9zZXN0UGxheWVyKCkKICAgIGxvY2FsIHZhcl85dXVpaGkgPSBuaWwKICAgIGxvY2FsIHZhcl84NngxYnUgPSBtYXRoLmh1Z2UKICAgIGxvY2FsIHZhcl91OGtsbTEgPSBVc2VySW5wdXRTZXJ2aWNlOkdldE1vdXNlTG9jYXRpb24oKQoKICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsciB+PSBMb2NhbFBsYXllciBhbmQgcGxyLkNoYXJhY3RlciBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgcGxyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgaWYgbm90IHRlYW1DaGVjayBvciBwbHIuVGVhbSB+PSBMb2NhbFBsYXllci5UZWFtIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHZhcl94cTJrbGMgPSBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGFpbWJvdFRhcmdldFBhcnQpCiAgICAgICAgICAgICAgICBpZiB0YXJnZXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl84ajBsaDUsIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHRhcmdldC5Qb3NpdGlvbikKICAgICAgICAgICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8yMHBiNTEgPSAoVmVjdG9yMi5uZXcoc2NyZWVuUG9zLlgsIHNjcmVlblBvcy5ZKSAtIG1vdXNlUG9zKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdCA8PSBmb3ZSYWRpdXMgYW5kIGRpc3QgPCBzaG9ydGVzdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdmlzaWJsZUNoZWNrIG9yIGlzVmlzaWJsZSh0YXJnZXQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdCA9IGRpc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0ID0gdGFyZ2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBjbG9zZXN0CmVuZAoKLS0gICAgU21vb3RoCgpsb2NhbCB2YXJfOWg5ZDU1IGFpbUF0KHRhcmdldCkKICAgIGlmIG5vdCB0YXJnZXQgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCB2YXJfdGZ5b3h1ID0gdGFyZ2V0LlBvc2l0aW9uCiAgICBsb2NhbCB2YXJfdnFsODVkID0gQ0ZyYW1lLm5ldyhDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uLCB0YXJnZXRQb3MpCiAgICBDYW1lcmEuQ0ZyYW1lID0gQ2FtZXJhLkNGcmFtZTpMZXJwKGFpbUNGcmFtZSwgc21vb3RobmVzcykKZW5kCgotLSAgICBJbnB1dCAgQWltCgpVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3BlKQogICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBhaW1LZXkgdGhlbgogICAgICAgIGhvbGRpbmdBaW1LZXkgPSB0cnVlCiAgICBlbmQKZW5kKQoKVXNlcklucHV0U2VydmljZS5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQsIGdwZSkKICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gYWltS2V5IHRoZW4KICAgICAgICBob2xkaW5nQWltS2V5ID0gZmFsc2UKICAgIGVuZAplbmQpCgotLSAgIExvb3AgCgpSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICBsb2NhbCB2YXJfOHpwNTJwID0gVXNlcklucHV0U2VydmljZTpHZXRNb3VzZUxvY2F0aW9uKCkKICAgIGZvdkNpcmNsZS5Qb3NpdGlvbiA9IG1vdXNlUG9zCiAgICBmb3ZDaXJjbGUuVmlzaWJsZSA9IGZvdkVuYWJsZWQKICAgIGZvdkNpcmNsZS5SYWRpdXMgPSBmb3ZSYWRpdXMKICAgIGZvdkNpcmNsZS5Db2xvciA9IGZvdkNvbG9yCgogICAgaWYgYWltYm90RW5hYmxlZCBhbmQgaG9sZGluZ0FpbUtleSB0aGVuCiAgICAgICAgbG9jYWwgdmFyXzJsbXhoOSA9IGdldENsb3Nlc3RQbGF5ZXIoKQogICAgICAgIGlmIHRhcmdldCB0aGVuCiAgICAgICAgICAgIGFpbUF0KHRhcmdldCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgotLSAgPT09PT09PT09PT09PT09PT09ICBVSSBCaW5kaW5nID09PT09PT09PT09PT09PT09PQoKCmxvY2FsIHZhcl96dnQzdjMgPSBUYWJzLkFpbVRhYjpBZGRMZWZ0R3JvdXBib3goIkVuYWJsZSBBaW1Cb3QiLCAidGFyZ2V0IikKbG9jYWwgdmFyXzFjZ3R6OCA9IFRhYnMuQWltVGFiOkFkZExlZnRHcm91cGJveCgiU2V0dGluZ3MgQWltQm90IiwgInNsaWRlcnMtdmVydGljYWwiKQpsb2NhbCB2YXJfY2F4Z2o4ID0gVGFicy5BaW1UYWI6QWRkUmlnaHRHcm91cGJveCgiU2V0dGluZ3MgRm92IiwgInNsaWRlcnMtdmVydGljYWwiKQoKLS0gICBBaW1ib3QgVG9nZ2xlCgpsb2NhbCB2YXJfdzA1anM5ID0gRW5hYmxlQWltQm90OkFkZFRvZ2dsZSgiQWltQm90VG9nZ2xlIiwgewogICAgVGV4dCA9ICJBaW1Cb3QiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBhaW1ib3RFbmFibGVkID0gVmFsdWUKICAgIGVuZAp9KQoKLS0gICAgTG9jayBQYXJ0CgpTZXR0aW5nc0FpbUJvdDpBZGREcm9wZG93bigiU2V0dGluZ3NBaW1Cb3REcm9wZG93biIsIHsKICAgIFZhbHVlcyA9IHsiSGVhZCIsICJIdW1hbm9pZFJvb3RQYXJ0In0sCiAgICBEZWZhdWx0ID0gMSwKICAgIFRleHQgPSAiTG9jayBQYXJ0IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgYWltYm90VGFyZ2V0UGFydCA9IFZhbHVlCiAgICBlbmQKfSkKCi0tICAgU21vb3RobmVzcwoKU2V0dGluZ3NBaW1Cb3Q6QWRkU2xpZGVyKCJTbW9vdGhuZXNzU2xpZGVyIiwgewogICAgVGV4dCA9ICJTbW9vdGhuZXNzIiwKICAgIERlZmF1bHQgPSBzbW9vdGhuZXNzLAogICAgTWluID0gMCwKICAgIE1heCA9IDEsCiAgICBSb3VuZGluZyA9IDIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHNtb290aG5lc3MgPSBWYWx1ZQogICAgZW5kCn0pCgotLSAgIFRlYW0gQ2hlY2sKClNldHRpbmdzQWltQm90OkFkZFRvZ2dsZSgiVGVhbUNoZWNrVG9nZ2xlIiwgewogICAgVGV4dCA9ICJUZWFtIENoZWNrIiwKICAgIFRvb2x0aXAgPSAiRG9uJ3QgYWltIGF0IHNhbWUgdGVhbSIsCiAgICBEZWZhdWx0ID0gdGVhbUNoZWNrLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICB0ZWFtQ2hlY2sgPSBWYWx1ZQogICAgZW5kCn0pCgotLSAgIFZpc2libGUgQ2hlY2sKClNldHRpbmdzQWltQm90OkFkZFRvZ2dsZSgiVmlzaWJsZUNoZWNrVG9nZ2xlIiwgewogICAgVGV4dCA9ICJWaXNpYmxlIENoZWNrIiwKICAgIFRvb2x0aXAgPSAiT25seSBhaW0gYXQgdmlzaWJsZSB0YXJnZXRzIiwKICAgIERlZmF1bHQgPSB2aXNpYmxlQ2hlY2ssCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHZpc2libGVDaGVjayA9IFZhbHVlCiAgICBlbmQKfSkKCi0tICAgS2V5YmluZCAoLyBBaW1ib3QgKQoKbG9jYWwgdmFyX3BiM2N1NyA9IEFpbUJvdFRvZ2dsZTpBZGRLZXlQaWNrZXIoIkFpbUtleWJpbmQiLCB7CiAgICBEZWZhdWx0ID0gIkYiLAogICAgVGV4dCA9ICJBaW1ib3QgS2V5IiwKICAgIE1vZGUgPSAiSG9sZCIsIC0tICAiSG9sZCIgPSAsICJUb2dnbGUiID0gLCAiQWx3YXlzIiA9IAoKICAgIFN5bmNUb2dnbGVTdGF0ZSA9IHRydWUsIC0tICAgS2V5YmluZCBzeW5jICBUb2dnbGUgCgogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICAtLSAgIFZhbHVlID0gdHJ1ZS9mYWxzZSAgTW9kZQoKICAgICAgICBhaW1ib3RFbmFibGVkID0gVmFsdWUKICAgICAgICBwcmludCgiQWltYm90IEtleWJpbmQ6IiwgVmFsdWUpCiAgICBlbmQKfSkKCi0tICAgRk9WIFRvZ2dsZQoKU2V0dGluZ3NGb3ZHcm91cGJveDpBZGRUb2dnbGUoIkVuYWJsZUZvdkFpbWJvdFRvZ2dsZSIsIHsKICAgIFRleHQgPSAiRm92IENpcmNsZSIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGZvdkVuYWJsZWQgPSBWYWx1ZQogICAgZW5kCn0pCgotLSAgIEZPViBDb2xvcgoKOkFkZENvbG9yUGlja2VyKCJGb3ZDb2xvclBpY2tlciIsIHsKICAgIERlZmF1bHQgPSBmb3ZDb2xvciwKICAgIFRpdGxlID0gIkZvdiBDb2xvciIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGZvdkNvbG9yID0gVmFsdWUKICAgIGVuZAp9KQoKLS0gICBGT1YgU2l6ZQoKU2V0dGluZ3NGb3ZHcm91cGJveDpBZGRTbGlkZXIoIkZvdlNsaWRlciIsIHsKICAgIFRleHQgPSAiRk9WIFNpemUiLAogICAgRGVmYXVsdCA9IGZvdlJhZGl1cywKICAgIE1pbiA9IDUwLAogICAgTWF4ID0gNTAwLAogICAgUm91bmRpbmcgPSAwLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBmb3ZSYWRpdXMgPSBWYWx1ZQogICAgZW5kCn0pCgoKbG9jYWwgdmFyX2gycDFmZSA9IFRhYnNbIlVJIFNldHRpbmdzIl06QWRkTGVmdEdyb3VwYm94KCJNZW51IiwgIndyZW5jaCIpCgpNZW51R3JvdXA6QWRkVG9nZ2xlKCJTaG93Q3VzdG9tQ3Vyc29yIiwgewoJVGV4dCA9ICJDdXN0b20gQ3Vyc29yIiwKCURlZmF1bHQgPSB0cnVlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKCQlMaWJyYXJ5LlNob3dDdXN0b21DdXJzb3IgPSBWYWx1ZQoJZW5kLAp9KQoKTWVudUdyb3VwOkFkZERpdmlkZXIoKQpNZW51R3JvdXA6QWRkTGFiZWwoIk1lbnUgYmluZCIpCgk6QWRkS2V5UGlja2VyKCJNZW51S2V5YmluZCIsIHsgRGVmYXVsdCA9ICJSaWdodENvbnRyb2wiLCBOb1VJID0gdHJ1ZSwgVGV4dCA9ICJNZW51IGtleWJpbmQiIH0pCgpNZW51R3JvdXA6QWRkQnV0dG9uKCJVbmxvYWQiLCBmdW5jdGlvbigpCglMaWJyYXJ5OlVubG9hZCgpCmVuZCkKCkxpYnJhcnkuVG9nZ2xlS2V5YmluZCA9IE9wdGlvbnMuTWVudUtleWJpbmQKClRoZW1lTWFuYWdlcjpTZXRMaWJyYXJ5KExpYnJhcnkpClNhdmVNYW5hZ2VyOlNldExpYnJhcnkoTGlicmFyeSkKClNhdmVNYW5hZ2VyOlNldElnbm9yZUluZGV4ZXMoeyAiTWVudUtleWJpbmQiIH0pCgpUaGVtZU1hbmFnZXI6U2V0Rm9sZGVyKCJLaXJieUh1YiIpClNhdmVNYW5hZ2VyOlNldEZvbGRlcigiS2lyYnlIdWIvc3BlY2lmaWMtZ2FtZSIpClNhdmVNYW5hZ2VyOlNldFN1YkZvbGRlcigic3BlY2lmaWMtcGxhY2UiKQoKU2F2ZU1hbmFnZXI6QnVpbGRDb25maWdTZWN0aW9uKFRhYnNbIlVJIFNldHRpbmdzIl0pCgpUaGVtZU1hbmFnZXI6QXBwbHlUb1RhYihUYWJzWyJVSSBTZXR0aW5ncyJdKQoKU2F2ZU1hbmFnZXI6TG9hZEF1dG9sb2FkQ29uZmlnKCk='))()
